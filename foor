// function escapeRegExp(string) {
//   return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
// }

// export const searchRecipe = (recipes, searchValue, tagArrays) => {
//   let recipesSearch = recipes;
//   const searchValueTrimmed = searchValue.toLowerCase().trim().replace(/\s/g, "");

//   if (searchValueTrimmed.length === 0 && (!tagArrays || tagArrays.length === 0)) {
//     return recipesSearch;
//   }

//   if (searchValueTrimmed.length !== 0) {
//     const escapedSearchValue = escapeRegExp(searchValueTrimmed);
//     const regex = new RegExp(escapedSearchValue, "i");

//     const filteredRecipes = [];
//     for (let i = 0; i < recipesSearch.length; i++) {
//       const recipe = recipesSearch[i];
//       const nameMatches = regex.test(recipe.name.toLowerCase().replace(/\s/g, ""));
//       const descriptionMatches = regex.test(recipe.description.toLowerCase().replace(/\s/g, ""));
      
//       if (nameMatches || descriptionMatches) {
//         filteredRecipes.push(recipe);
//         continue;
//       }

//       for (let j = 0; j < recipe.ingredients.length; j++) {
//         const ingredientObj = recipe.ingredients[j];
//         if (typeof ingredientObj === "object" && "ingredient" in ingredientObj) {
//           const ingredientMatches = regex.test(ingredientObj.ingredient.toLowerCase().replace(/\s/g, ""));
//           if (ingredientMatches) {
//             filteredRecipes.push(recipe);
//             break;
//           }
//         }
//       }
//     }
//     recipesSearch = filteredRecipes;
//   }

//   // if (tagArrays && tagArrays.selectedIngredientTagsArray.length > 0) {
//   //   const selectedIngredientTags = tagArrays.selectedIngredientTagsArray;
//   //   const filteredRecipes = [];
//   //   for (let i = 0; i < recipesSearch.length; i++) {
//   //     const recipe = recipesSearch[i];
//   //     let ingredientMatch = true;
//   //     for (let j = 0; j < selectedIngredientTags.length; j++) {
//   //       const selectedTag = selectedIngredientTags[j].toLowerCase();
//   //       const tagRegex = new RegExp(escapeRegExp(selectedTag), "i");
//   //       const hasMatchingIngredient = recipe.ingredients.some(ingredientObj => tagRegex.test(ingredientObj.ingredient.toLowerCase()));
//   //       if (!hasMatchingIngredient) {
//   //         ingredientMatch = false;
//   //         break;
//   //       }
//   //     }
//   //     if (ingredientMatch) {
//   //       filteredRecipes.push(recipe);
//   //     }
//   //   }
//   //   recipesSearch = filteredRecipes;
//   // }


//   //   if (tagArrays && tagArrays.selectedApplianceTagsArray.length > 0) {
//   //     const selectedApplianceTags = tagArrays.selectedApplianceTagsArray;
//   //     const filteredRecipes = [];
//   //     for (let i = 0; i < recipesSearch.length; i++) {
//   //       const recipe = recipesSearch[i];
//   //       const applianceMatches = selectedApplianceTags.some(tag => {
//   //         const tagRegex = new RegExp(escapeRegExp(tag.toLowerCase()), "i");
//   //         return tagRegex.test(recipe.appliance.toLowerCase());
//   //       });
//   //       if (applianceMatches) {
//   //         filteredRecipes.push(recipe);
//   //       }
//   //     }
//   //     recipesSearch = filteredRecipes;
//   //   }
    
//     if (tagArrays && tagArrays.selectedUstensilTagsArray.length > 0) {
//       const selectedUstensilTags = tagArrays.selectedUstensilTagsArray;
//       const filteredRecipes = [];
//       for (let i = 0; i < recipesSearch.length; i++) {
//         const recipe = recipesSearch[i];
//         let ustensilMatch = true;
//         for (let j = 0; j < selectedUstensilTags.length; j++) {
//           const selectedTag = selectedUstensilTags[j].toLowerCase();
//           const tagRegex = new RegExp(escapeRegExp(selectedTag), "i");
//           const hasMatchingUstensil = recipe.ustensils.some(ustensil => tagRegex.test(ustensil.toLowerCase()));
//           if (!hasMatchingUstensil) {
//             ustensilMatch = false;
//             break;
//           }
//         }
//         if (ustensilMatch) {
//           filteredRecipes.push(recipe);
//         }
//       }
//     recipesSearch = filteredRecipes;
//   }

//   if (tagArrays && tagArrays.selectedIngredientTagsArray.length > 0) {
//     const selectedIngredientTags = tagArrays.selectedIngredientTagsArray.map(tag => tag.toLowerCase());
//     const filteredRecipes = [];
//     for (let i = 0; i < recipesSearch.length; i++) {
//       const recipe = recipesSearch[i];
//       let ingredientMatch = true;
//       for (let j = 0; j < selectedIngredientTags.length; j++) {
//         const selectedTag = selectedIngredientTags[j];
//         let tagFound = false;
//         for (let k = 0; k < recipe.ingredients.length; k++) {
//           const ingredient = recipe.ingredients[k].ingredient.toLowerCase();
//           if (ingredient.includes(selectedTag)) {
//             tagFound = true;
//             break;
//           }
//         }
//         if (!tagFound) {
//           ingredientMatch = false;
//           break;
//         }
//       }
//       if (ingredientMatch) {
//         filteredRecipes.push(recipe);
//       }
//     }
//     recipesSearch = filteredRecipes;
//   }
  
//   if (tagArrays && tagArrays.selectedApplianceTagsArray.length > 0) {
//     const selectedApplianceTags = tagArrays.selectedApplianceTagsArray.map(tag => tag.toLowerCase());
//     const filteredRecipes = [];
//     for (let i = 0; i < recipesSearch.length; i++) {
//       const recipe = recipesSearch[i];
//       let applianceMatch = false;
//       for (let j = 0; j < selectedApplianceTags.length; j++) {
//         const selectedTag = selectedApplianceTags[j];
//         const recipeAppliance = recipe.appliance.toLowerCase();
//         if (recipeAppliance.includes(selectedTag)) {
//           applianceMatch = true;
//           break;
//         }
//       }
//       if (applianceMatch) {
//         filteredRecipes.push(recipe);
//       }
//     }
//     recipesSearch = filteredRecipes;
//   }
  
//   // Répétez des structures similaires pour les autres types de tags...
  
  
  
  
  
  

  

//   return recipesSearch;
// };














// if (tagArrays && tagArrays.selectedIngredientTagsArray.length > 0) {
//   const selectedIngredientTags = tagArrays.selectedIngredientTagsArray.map(tag => tag.toLowerCase());
//   const filteredRecipes = [];
//   for (let i = 0; i < recipesSearch.length; i++) {
//     const recipe = recipesSearch[i];
//     let hasAllIngredients = true;
//     for (let j = 0; j < selectedIngredientTags.length; j++) {
//       const tag = selectedIngredientTags[j];
//       let tagFound = false;
//       for (let k = 0; k < recipe.ingredients.length; k++) {
//         const ingredient = recipe.ingredients[k].ingredient.toLowerCase();
//         if (ingredient.includes(tag)) {
//           tagFound = true;
//           break;
//         }
//       }
//       if (!tagFound) {
//         hasAllIngredients = false;
//         break;
//       }
//     }
//     if (hasAllIngredients) {
//       filteredRecipes.push(recipe);
//     }
//   }
//   recipesSearch = filteredRecipes;
// }

// if (tagArrays && tagArrays.selectedApplianceTagsArray.length > 0) {
//   const selectedApplianceTags = tagArrays.selectedApplianceTagsArray.map(tag => tag.toLowerCase());
//   const filteredRecipes = [];
//   for (let i = 0; i < recipesSearch.length; i++) {
//     const recipe = recipesSearch[i];
//     const recipeAppliance = recipe.appliance.toLowerCase();
//     let applianceMatch = false;
//     for (let j = 0; j < selectedApplianceTags.length; j++) {
//       const tag = selectedApplianceTags[j];
//       if (recipeAppliance.includes(tag)) {
//         applianceMatch = true;
//         break;
//       }
//     }
//     if (applianceMatch) {
//       filteredRecipes.push(recipe);
//     }
//   }
//   recipesSearch = filteredRecipes;
// }